function number_format(e,t,r,a){var s=e,i=isNaN(t=Math.abs(t))?2:t,n=null==r?",":r,o=null==a?".":a,c=s<0?"-":"",d=parseInt(s=Math.abs(+s||0).toFixed(i))+"",m=(m=d.length)>3?m%3:0;return c+(m?d.substr(0,m)+o:"")+d.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+o)+(i?n+Math.abs(s-d).toFixed(i).slice(2):"")}$(function(){$("#services-1-joindata-full-price-members").on("blur",function(){$("#vFullPerson").text($("#services-1-joindata-full-price-members").val())}),$("#services-1-joindata-discount-price-members").on("blur",function(){$("#vDiscountPerson").text($("#services-1-joindata-discount-price-members").val())}),$("input[data-service]").on("blur",s);var e={},t=$(location).attr("origin"),r=$($("script")[1]).attr("src").replace(/\/js\/.*/,""),a=t+r+"/servicesDays/listNonServicesDays.json";$.ajax({method:"get",url:a,success:function(t){var r=t.nonServicesDays;for(var a in r)r.hasOwnProperty(a)&&(e[new Date(r[a])]=new Date(r[a]));$("#datepicker").datetimepicker({beforeShowDay:function(t){return e[t]?[!1,""]:[!0,"",""]},minDate:new Date,controlType:"select",timeFormat:"HH:mm",dateFormat:"yy-mm-dd",timeText:"Idő",hourText:"Óra",minuteText:"Perc",secondText:"Másodperc",currentText:"Ma",closeText:"Ok",hourMin:10,hourMax:17,timeFormat:"HH",showTime:!1,showMinute:!1,showSecond:!1,showMillisec:!1,showMicrosec:!1})}}),$("#datepicker").on("blur",function(){$("#vDate").text($("#datepicker").val().replace(" ","/"))}),$("#open input").blur(function(){$("#datepicker").val()&&($("#services-1-joindata-full-price-members").val()||$("#services-1-joindata-discount-price-members").val())&&($(".fi-arrow-down").css("color","#483a23"),$("nav#open").hide(),s(),$("nav#steps").show(),$("#step-1").show())}),$(".fi-arrow-down").click(function(){$("#datepicker").val()&&($("#services-1-joindata-full-price-members").val()||$("#services-1-joindata-discount-price-members").val())&&$("html, body").animate({scrollTop:$("#step-1").offset().top},1e3)});var s=function(){var e="",t=0,r=0;$("*[data-service]").each(function(){if($(this).val()){var a=$(this).data("price-full")?$(this).data("price-full"):$(this).data("price-discount"),s=$(this).val()*a;t+=s,e+="<dd>"+$(this).data("service")+": "+$(this).val()+" fő * "+number_format(a,0)+" Ft</dd><dt>"+number_format(s,0)+" Ft</dt>",r=r||r+$(this).data("minutes"),$(".service-main").addClass("selected")}if($(this).hasClass("success")){var i=$(this).data("price-full"),n=$(this).data("price-discount"),o=$("#services-1-joindata-full-price-members").val();o&&(t+=i*o,e+="<dd>"+$(this).data("service")+": "+o+" fő * "+number_format(i,0)+" Ft</dd><dt>"+number_format(i*o,0)+" Ft</dt>");var c=$("#services-1-joindata-discount-price-members").val();c&&(t+=n*c,e+="<dd>"+$(this).data("service")+": "+c+" fő * "+number_format(n,0)+" Ft</dd><dt>"+number_format(n*c,0)+" Ft</dt>"),r+=$(this).data("minutes")}}),e+='<dt class="b">Összesen: '+number_format(t,0)+" Ft</dt>",e+="<dd>A programhoz szükséges idő</dd><dt>"+number_format(r/60,1)+" óra</dt>",$("#summary").html(e),(t||11!=$('#order button[type="submit"]').text().length)&&($('#order button[type="submit"]').text("Megrendelem "+number_format(t,0)+" Ft ("+number_format(r/60,1)+" óra)"),$("#main-service").is(":hidden")&&$('#order button[type="submit"]').hide().fadeIn())}});